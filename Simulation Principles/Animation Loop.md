SOFA 中的所有场景都必须包含 AnimationLoop。该组件对模拟的所有步骤和系统分辨率进行排序。在每个时间步，动画循环通过访问者Visitor机制（见下文）触发每个事件（求解矩阵系统、管理约束、检测碰撞等）。在场景中，如果没有定义动画循环，则会自动创建一个“DefaultAnimationLoop”。

SOFA 中已经有几个 AnimationLoop 可用：

 - DefaultAnimationLoop：顾名思义，这是默认的动画循环！如果场景中未指定动画循环，则默认情况下，此动画循环包含在图形的根节点中。使用 DefaultAnimationLoop，一个模拟步骤的循环如下：

    1. 通过碰撞管道collision pipline触发碰撞检测（如果有）
    2. 通过触发集成方案，考虑约束，碰撞来解决场景中的物理问题
    3. 更新系统（自由度的新值）、上下文the contex（dt++）、映射the mappings和边界框bounding box（覆盖场景所有对象的体积）
 
 - MultiTagAnimationLoop：这个动画循环通过使用不同的标签标记组件来工作。使用 MultiTagAnimationLoop，一个模拟步骤的循环与 DefaultAnimationLoop 相同，除了一个标签一个接一个求解，给定标签列表：
    1. 对于每个定义的标签： 1. 通过碰撞管道（如果有）触发碰撞检测 2. 通过触发集成方案解决场景中的物理问题，考虑约束，碰撞
    2. 更新系统（自由度的新值）、上下文（dt++）、映射和边界框（覆盖场景所有对象的体积）
 
 - MultiStepAnimationLoop：给定一个时间步长，这个动画循环允许在一个步骤中运行多个碰撞（C 是碰撞步数）和几个积分时间（I 是积分时间步数），其中 C 和 I 可以不同。如果全局时间步长记为 dt，则时间积分时间实际上为：dt’ = dt / (C.I)。一个动画步骤中的循环是：
    1. 在一个时间步长 dt 内计算 C 乘以碰撞管道
    2. 对于每个碰撞步骤，使用时间步长 dt’ 求解线性系统的 I 倍时间积分
    3. 更新上下文、映射、边界框（可视化在每个时间步 dt 完成一次）
    
 - FreeMotionAnimationLoop：此动画循环用于涉及约束和碰撞的模拟。使用 FreeAnimationLoop，一个模拟步骤的循环如下：
    1. 解决场景中的所有线性系统，不受约束，并保存自由度的“自由”值
    2. 计算碰撞检测从而产生约束
    3. 约束作为一个系统来解决，以在考虑碰撞和约束的情况下计算校正项
    4. 更新映射，边界框
